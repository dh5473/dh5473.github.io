<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 5.14.4"/><meta data-react-helmet="true" name="description" content="Python의 가비지 컬렉션 과정과 세대별 가비지 컬렉터의 동작 원리에 대해 알아봅니다."/><meta data-react-helmet="true" name="viewport" content="width=device-width, initial-scale=1.0"/><meta data-react-helmet="true" http-equiv="Content-Type" content="text/html;charset=UTF-8"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" property="og:title" content="[Python] Garbage Collection | Donhyeok&#x27;s Blog"/><meta data-react-helmet="true" property="og:description" content="Python의 가비지 컬렉션 과정과 세대별 가비지 컬렉터의 동작 원리에 대해 알아봅니다."/><meta data-react-helmet="true" property="og:image" content="/static/8a5ef884fcdafd689ceeef85a9885b13/python-logo.png"/><meta data-react-helmet="true" property="og:url"/><meta data-react-helmet="true" property="og:site_name" content="[Python] Garbage Collection | Donhyeok&#x27;s Blog"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:title" content="[Python] Garbage Collection | Donhyeok&#x27;s Blog"/><meta data-react-helmet="true" name="twitter:description" content="Python의 가비지 컬렉션 과정과 세대별 가비지 컬렉터의 동작 원리에 대해 알아봅니다."/><meta data-react-helmet="true" name="twitter:image" content="/static/8a5ef884fcdafd689ceeef85a9885b13/python-logo.png"/><meta data-react-helmet="true" name="twitter:site" content="@dh5473"/><meta data-react-helmet="true" name="twitter:creator" content="@dh5473"/><meta data-react-helmet="true" name="google-site-verification" content="6XVBzencr6SkW_qtNsc8pZrsOARNn4-tPhVcPC9Vy0I"/><meta data-react-helmet="true" name="naver-site-verification" content="7ba00a2f54b28fc732e03fe4b645be26d4e5f4ed"/><style data-href="/styles.9e907bc32054b7771552.css" data-identity="gatsby-global-css">code[class*=language-],pre[class*=language-]{word-wrap:normal;background:none;color:#ccc;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;-webkit-hyphens:none;hyphens:none;line-height:1.5;tab-size:4;text-align:left;white-space:pre;word-break:normal;word-spacing:normal}pre[class*=language-]{margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2d2d2d}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.1em;white-space:normal}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#999}.token.punctuation{color:#ccc}.token.attr-name,.token.deleted,.token.namespace,.token.tag{color:#e2777a}.token.function-name{color:#6196cc}.token.boolean,.token.function,.token.number{color:#f08d49}.token.class-name,.token.constant,.token.property,.token.symbol{color:#f8c555}.token.atrule,.token.builtin,.token.important,.token.keyword,.token.selector{color:#cc99cd}.token.attr-value,.token.char,.token.regex,.token.string,.token.variable{color:#7ec699}.token.entity,.token.operator,.token.url{color:#67cdcc}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.token.inserted{color:green}</style><title data-react-helmet="true">[Python] Garbage Collection | Donhyeok&#x27;s Blog</title><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><link rel="canonical" href="https://dh5473.github.io/python-series/garbage-collection/" data-baseprotocol="https:" data-basehost="dh5473.github.io"/><link rel="sitemap" type="application/xml" href="/sitemap-index.xml"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion="css 11pfcjj">.css-11pfcjj{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;min-height:100vh;}</style><main class="css-11pfcjj e1strnqo0"><style data-emotion="css-global 1ctel7">@import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css');@import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700&display=swap');*{padding:0;margin:0;box-sizing:border-box;font-family:'Pretendard',-apple-system,BlinkMacSystemFont,system-ui,Roboto,'Helvetica Neue','Segoe UI','Apple SD Gothic Neo','Noto Sans KR','Malgun Gothic','Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol',sans-serif;}html,body,#___gatsby{height:100%;}a,a:hover{color:inherit;-webkit-text-decoration:none;text-decoration:none;cursor:pointer;}code,pre,code[class*='language-'],pre[class*='language-']{font-family:'JetBrains Mono','Fira Code',Consolas,'Liberation Mono',Menlo,Courier,monospace!important;}</style><style data-emotion="css 16cz9yp">.css-16cz9yp{position:relative;width:100%;height:400px;}@media (max-width: 768px){.css-16cz9yp{height:300px;}}</style><div class="css-16cz9yp e1opi4mu1"><style data-emotion="css 1bjn9yo">.css-1bjn9yo{z-index:-1;width:100%;height:400px;object-fit:cover;-webkit-filter:brightness(0.25);filter:brightness(0.25);}@media (max-width: 768px){.css-1bjn9yo{height:300px;}}</style><div data-gatsby-image-wrapper="" style="position:absolute" class="gatsby-image-wrapper gatsby-image-wrapper-constrained css-1bjn9yo e1opi4mu0"><div style="max-width:2400px;display:block"><img alt="" role="presentation" aria-hidden="true" src="data:image/svg+xml;charset=utf-8,%3Csvg%20height=&#x27;1500&#x27;%20width=&#x27;2400&#x27;%20xmlns=&#x27;http://www.w3.org/2000/svg&#x27;%20version=&#x27;1.1&#x27;%3E%3C/svg%3E" style="max-width:100%;display:block;position:static"/></div><img aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear" decoding="async" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAABV0lEQVR42qVSzU7CQBDuO3n2IbzoM3jwoB49eyLh5gNoGtR4wUOPbSIppJv+mCAQIG1pBIuEpCkNtM12fxyKkoYIJjLZbSbzfd90dmYEvocJcFlu2xg7UOEnzPLzzd6Qrb8bWYQ0Ix/BPMGkqCySkiRJ03QtLiYSJOv98Orp+lFd/R1jHEURAJRSiLiuaxhGv98HP47jxWIBcSAQQqbTqXBclg8uns9vbvn8njL61moBu9Fo+L7f6/UkSVJVtVar6bpuWZZpmoBqmmbb9rLs0sOdhsre6yn3TjI8R0jvdruiKHY6HeCBDCE0GAyq1Wq9Xm+325VKxXEcgJbikVvin0dsdMlCGcqWZRnSB0HQbDYVRRkOh57nhWE4mUzs3MbjMaBQ81JMZy+Zc0YjlLeBwiPh2eBD2SD7Y87QF4wJJRnntDghaAnbaaslYb8OecPfumF7ree/xV9Sfd5KloGmkQAAAABJRU5ErkJggg==" alt=""/><picture><source type="image/webp" data-srcset="/static/8a5ef884fcdafd689ceeef85a9885b13/7d11e/python-logo.webp 600w,/static/8a5ef884fcdafd689ceeef85a9885b13/d5ccd/python-logo.webp 1200w,/static/8a5ef884fcdafd689ceeef85a9885b13/8e240/python-logo.webp 2400w" sizes="(min-width: 2400px) 2400px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 2400px) 2400px, 100vw" decoding="async" loading="lazy" data-src="/static/8a5ef884fcdafd689ceeef85a9885b13/05035/python-logo.png" data-srcset="/static/8a5ef884fcdafd689ceeef85a9885b13/42ddb/python-logo.png 600w,/static/8a5ef884fcdafd689ceeef85a9885b13/33436/python-logo.png 1200w,/static/8a5ef884fcdafd689ceeef85a9885b13/05035/python-logo.png 2400w" alt="thumbnail"/></picture><noscript><picture><source type="image/webp" srcSet="/static/8a5ef884fcdafd689ceeef85a9885b13/7d11e/python-logo.webp 600w,/static/8a5ef884fcdafd689ceeef85a9885b13/d5ccd/python-logo.webp 1200w,/static/8a5ef884fcdafd689ceeef85a9885b13/8e240/python-logo.webp 2400w" sizes="(min-width: 2400px) 2400px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 2400px) 2400px, 100vw" decoding="async" loading="lazy" src="/static/8a5ef884fcdafd689ceeef85a9885b13/05035/python-logo.png" srcSet="/static/8a5ef884fcdafd689ceeef85a9885b13/42ddb/python-logo.png 600w,/static/8a5ef884fcdafd689ceeef85a9885b13/33436/python-logo.png 1200w,/static/8a5ef884fcdafd689ceeef85a9885b13/05035/python-logo.png 2400w" alt="thumbnail"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div><style data-emotion="css m1156n">.css-m1156n{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:768px;height:100%;margin:0 auto;padding:60px 0;color:#ffffff;}@media (max-width: 768px){.css-m1156n{width:100%;padding:40px 20px;}}</style><div class="css-m1156n e1st1jau3"><style data-emotion="css gywgo7">.css-gywgo7{display:grid;place-items:center;width:40px;height:40px;border-radius:50%;background:#ffffff;color:#000000;font-size:22px;cursor:pointer;box-shadow:0 0 10px rgba(0, 0, 0, 0.3);}@media (max-width: 768px){.css-gywgo7{width:30px;height:30px;font-size:18px;}}</style><div class="css-gywgo7 e1st1jau2"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="arrow-left" class="svg-inline--fa fa-arrow-left " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.2 288 416 288c17.7 0 32-14.3 32-32s-14.3-32-32-32l-306.7 0L214.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"></path></svg></div><style data-emotion="css gn4qtp">.css-gn4qtp{display:-webkit-box;overflow:hidden;overflow-wrap:break-word;margin-top:auto;text-overflow:ellipsis;white-space:normal;-webkit-line-clamp:2;-webkit-box-orient:vertical;font-size:45px;font-weight:800;}@media (max-width: 768px){.css-gn4qtp{font-size:30px;}}</style><div class="css-gn4qtp e1st1jau1">[Python] Garbage Collection</div><style data-emotion="css 3gcnt2">.css-3gcnt2{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-top:10px;font-size:18px;font-weight:700;}@media (max-width: 768px){.css-3gcnt2{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;font-size:15px;font-weight:400;}}</style><div class="css-3gcnt2 e1st1jau0"><div>Dev</div><div>2025.02.21.</div></div></div></div><style data-emotion="css 17fna5e">.css-17fna5e{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:768px;margin:0 auto;padding:100px 0;word-break:break-all;line-height:1.8;font-size:18px;font-weight:400;}.css-17fna5e p{padding:3px 0;margin-bottom:10px;}.css-17fna5e h1,.css-17fna5e h2,.css-17fna5e h3{font-weight:800;margin-bottom:10px;}.css-17fna5e *+h1,.css-17fna5e *+h2,.css-17fna5e *+h3{margin-top:60px;}.css-17fna5e hr+h1,.css-17fna5e hr+h2,.css-17fna5e hr+h3{margin-top:0;}.css-17fna5e h1{font-size:34px;}.css-17fna5e h2{font-size:28px;}.css-17fna5e h3{font-size:22px;}.css-17fna5e blockquote{margin:20px 0;padding:5px 15px;border-left:2px solid #000000;font-weight:800;}.css-17fna5e ol,.css-17fna5e ul{margin-left:20px;padding:20px 0;}.css-17fna5e li{margin-bottom:6px;line-height:1.7;}.css-17fna5e hr{border:1px solid #000000;margin:60px 0;}.css-17fna5e a{color:#4263eb;-webkit-text-decoration:underline;text-decoration:underline;}.css-17fna5e pre[class*='language-']{margin:20px 0;padding:0;font-size:16px;background:#1e1e1e!important;border-radius:8px;overflow:hidden;position:relative;}.css-17fna5e pre[class*='language-']::-webkit-scrollbar-thumb{background:rgba(255, 255, 255, 0.3);border-radius:3px;}.css-17fna5e pre[class*='language-']:before{content:'';display:block;height:35px;background:#333;position:relative;}.css-17fna5e pre[class*='language-']:after{content:'';position:absolute;top:14px;left:15px;width:10px;height:10px;background:#ff5f56;border-radius:50%;box-shadow:16px 0 0 #ffbd2e,32px 0 0 #27ca3f;}.css-17fna5e pre[class*='language-'] code{display:block;padding:15px 20px;background:transparent!important;}.css-17fna5e .copy-button{position:absolute;top:8px;right:12px;background:#4a4e54;border:none;border-radius:4px;color:#ffffff;padding:4px 8px;font-size:12px;cursor:pointer;opacity:0;-webkit-transition:all 0.2s ease;transition:all 0.2s ease;z-index:10;}.css-17fna5e pre[class*='language-']:hover .copy-button{opacity:1;}.css-17fna5e .copy-button:hover{background:#5a5e64;}.css-17fna5e .copy-button.copied{background:#27ca3f;color:white;}.css-17fna5e code[class*='language-'],.css-17fna5e pre[class*='language-']{tab-size:2;}.css-17fna5e code:not([class*='language-']){background:#f1f3f4;padding:2px 6px;border-radius:4px;font-size:16px;}@media (max-width: 768px){.css-17fna5e{width:100%;padding:80px 20px;line-height:1.6;font-size:16px;}.css-17fna5e *+h1,.css-17fna5e *+h2,.css-17fna5e *+h3{margin-top:40px;}.css-17fna5e h1,.css-17fna5e h2,.css-17fna5e h3{margin-bottom:16px;}.css-17fna5e h1{font-size:26px;}.css-17fna5e h2{font-size:23px;}.css-17fna5e h3{font-size:19px;}.css-17fna5e blockquote{font-size:15px;margin:16px 0;}.css-17fna5e pre[class*='language-']{font-size:14px;margin:16px 0;border-radius:6px;}.css-17fna5e pre[class*='language-']:after{top:9px;left:10px;width:6px;height:6px;box-shadow:12px 0 0 #ffbd2e,24px 0 0 #27ca3f;}.css-17fna5e pre[class*='language-']:before{height:25px;}.css-17fna5e pre[class*='language-'] code{padding:12px 16px;font-size:13px;}.css-17fna5e .copy-button{top:6px;right:8px;padding:3px 6px;font-size:11px;}.css-17fna5e code:not([class*='language-']){font-size:14px;}.css-17fna5e img{width:100%;}.css-17fna5e hr{margin:40px 0;}}</style><div class="css-17fna5e e1ijh0y10"><h2>Garbage Collection 이란?</h2>
<p>가비지 컬렉션(garbage collection)은 자동으로 메모리 관리를 수행하는 과정입니다. 사용되지 않는 메모리 영역을 식별하고, 해제하여 메모리를 재사용 가능하게 만드는 것이 목적입니다.</p>
<h3>Python의 GC</h3>
<p>파이썬의 메모리 관리는 다음과 같은 흐름으로 진행됩니다.</p>
<ol>
<li>레퍼런스 카운팅 (Reference Counting)</li>
<li>순환 참조 (Reference Cycle)</li>
<li>세대별 가비지 컬렉션 (Generational Garbage Collection)</li>
</ol>
<p>앞의 두 과정은 <a href="https://velog.io/@dh5473/Python-Reference-Counting" target="_blank" rel="nofollow">이전 포스트</a>에서 다루었는데, 간단히 살펴보면, 파이썬은 기본적으로 객체를 메모리에 할당할 때 레퍼런스 카운트 방식을 사용합니다. 각 객체 혹은 어떤 변수는 다른 객체에 의해 참조될 때마다 카운트가 증가하게 됩니다. 레퍼런스 카운트가 0이 될 경우 가비지 컬렉터는 해당 객체를 메모리에서 해제하게 됩니다.</p>
<p>이때 두 개 이상의 객체가 서로를 참조하는 경우 레퍼런스 카운트가 0이 되지 않는 상황이 발생하는데, 이를 순환 참조라고 합니다. 이러한 경우 자동으로 메모리에서 해제되지 않기 때문에, 순환 참조를 탐지하고 해결하기 위해 세대별 가비지 컬렉션이라는 방법을 도입합니다.
<br></p>
<h2>Generational Garbage Collector</h2>
<h3>세대 (Generation)</h3>
<p>파이썬의 세대별 가비지 컬렉터는 특정 전제 하에 작동합니다. 대부분의 객체는 짧은 시간 동안만 존재하고, 따라서 새로운 객체가 오래된 객체보다 메모리 해제될 가능성이 높다는 방향성으로, 아래와 같이 3가지의 세대로 나누어 관리합니다.</p>
<ul>
<li>세대 0: 가장 최근에 생성된 객체들이 속합니다. 컬렉션이 자주 작동합니다.</li>
<li>세대 1: 세대 0에서 살아남은 객체들이 이동합니다. 컬렉션이 세대 0보다 드물게 작동합니다.</li>
<li>세대 2: 가장 오래된 객체들이 속한 세대입니다. 컬렉션이 가장 드물게 작동합니다.</li>
</ul>
<br>
<h3>임계값 (Threshold)</h3>
<p>각 세대별로 가비지 컬렉션이 언제 발생할지 결정하는 임계값이 존재합니다. 해당 세대에 할당된 객체 수와 관련이 있으며, 다음과 같은 방식으로 임계값을 사용합니다.</p>
<ul>
<li>각 세대에 객체가 추가될 때마다 카운트가 증가합니다.</li>
<li>어떤 세대의 객체 수(카운트)가 해당 세대 임계값을 초과하면, 해당 세대에 대한 가비지 컬렉션이 실행됩니다. 가비지 컬렉션 프로세스에서 살아남은 객체의 경우 다음 세대로 이동합니다.</li>
<li>세대 0의 가비지 컬렉션 수행은 나머지 임계값에도 영향을 줍니다. 세대 0의 가비지 컬렉션이 일정 횟수 수행되면, 세대 1에서도 실행되고, 세대 2에도 영향을 미치는 식입니다.</li>
</ul>
<p>아래와 같이 gc 모듈을 사용하여 가비지 컬렉션 동작 및 통계 등을 직접 확인할 수도 있습니다.</p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token keyword">import</span> gc

<span class="token operator">>></span><span class="token operator">></span> gc<span class="token punctuation">.</span>get_threshold<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token number">700</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>

<span class="token operator">>></span><span class="token operator">></span> <span class="token punctuation">(</span>gc<span class="token punctuation">.</span>get_count<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token number">167</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span></code></pre></div>
<br>
<h2>순환 참조와 컨테이너 객체</h2>
<p>컨테이너 객체란 다른 객체들에 대한 참조를 보유할 수 있는 객체입니다. 예를 들어 튜플, 리스트, 집합, 딕셔너리, 클래스 등이 있습니다. 문자열의 경우 컨테이너 타입이라고 할 수는 있지만, 다른 객체에 대한 참조를 저장하지 않기 때문에 순환 참조의 고려 대상은 아닙니다. 정수와 같은 기본 데이터 타입 역시 고려 대상이 아닙니다.</p>
<p>gc 모듈을 활용하면 collect() 메서드를 통해 가비지 컬렉션(순환 참조 탐지 알고리즘 포함)을 수행할 수 있습니다. 그렇다면 순환 참조를 어떻게 탐지할 수 있을까요? 대략적인 과정은 아래와 같습니다.</p>
<ol>
<li>파이썬은 모든 컨테이너 객체 추적을 위해 더블 링크드 리스트를 사용합니다. PyGC_Head라는 구조체에 정의되어 있으며, 컨테이너 객체가 생성 혹은 삭제될 때 이 리스트에 추가되거나 제거됩니다.</li>
<li>각 객체는 gc_refs라는 필드를 가지고 있으며, 초기에 객체의 레퍼런스 카운트와 동일하게 설정됩니다.</li>
<li>각 객체에서 참조하고 있는 다른 컨테이너 객체를 찾아 참조되는 컨테이너의 gc_refs를 감소시킵니다. gc_refs가 0이 되는 경우 해당 객체는 컨테이너 집합 내부에서 순환 참조를 이루고 있음을 의미합니다.</li>
<li>gc_refs가 0인 객체는 unreachable로 설정하고, 메모리에서 해제합니다.</li>
</ol>
<br>
<h3>최적화</h3>
<p>위의 설명대로라면 순환 참조를 일으키지 않는 컨테이너 객체들은 추적할 필요가 없습니다. 파이썬은 가비지 컬렉션의 비용을 줄이기 위해 일부 객체들을 추적에서 제외합니다. 물론, 제외할 객체를 결정하는 것도 비용이기 때문에 비용의 이득 관계를 고려하여 다음과 같은 두 가지 전략을 사용합니다.</p>
<ul>
<li>컨테이너가 생성될 때</li>
<li>가비지 컬렉터가 컨테이너를 검사할 때</li>
</ul>
<p>일반적으로 atomic한 인스턴스의 경우 추적하지 않고, 그렇지 않은 인스턴스는 추적합니다. 다만, 경우에 따라 동작 최적화가 다르게 적용됩니다. gc 모듈의 is_tracked(obj) 함수를 사용하면 객체의 추적 상태를 확인할 수 있습니다.</p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> gc<span class="token punctuation">.</span>is_tracked<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
<span class="token boolean">False</span>

<span class="token operator">>></span><span class="token operator">></span> gc<span class="token punctuation">.</span>is_tracked<span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">)</span>
<span class="token boolean">False</span>

<span class="token operator">>></span><span class="token operator">></span> gc<span class="token punctuation">.</span>is_tracked<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token boolean">True</span>

<span class="token operator">>></span><span class="token operator">></span> gc<span class="token punctuation">.</span>is_tracked<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token boolean">False</span>

<span class="token operator">>></span><span class="token operator">></span> gc<span class="token punctuation">.</span>is_tracked<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">"a"</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token boolean">False</span>

<span class="token operator">>></span><span class="token operator">></span> gc<span class="token punctuation">.</span>is_tracked<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">"a"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token boolean">True</span></code></pre></div>
<br>
<h2>참고 자료</h2>
<ul>
<li><a href="https://devguide.python.org/internals/garbage-collector/" target="_blank" rel="nofollow">Python Developer’s Guide - Garbage Collector</a></li>
<li><a href="https://blog.winterjung.dev/2018/02/18/python-gc" target="_blank" rel="nofollow">Python GC 이해하기</a></li>
<li><a href="https://medium.com/dmsfordsm/garbage-collection-in-python-777916fd3189" target="_blank" rel="nofollow">Garbage Collection in Python</a></li>
</ul></div><style data-emotion="css hx9xpc">@media (max-width: 768px){.css-hx9xpc{padding:0 20px;}}</style><div class="css-hx9xpc e1gqsjds0"></div><style data-emotion="css 9w9jmx">.css-9w9jmx{display:grid;place-items:center;margin-top:auto;padding:50px 0;font-size:15px;text-align:center;line-height:1.5;}@media (max-width: 768px){.css-9w9jmx{font-size:13px;}}</style><footer class="css-9w9jmx e1oae0v80">Thank You for Visiting My Blog, Have a Good Day 😆<br/>© 2025 Developer Donhyeok, Powered By Gatsby.</footer></main></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-WSM9M8LZ1S"></script><script>
    window.GATSBY_GTAG_PLUGIN_GA_TRACKING_ID = (
      'G-WSM9M8LZ1S'
    );
    window.GATSBY_GTAG_PLUGIN_ANONYMIZE = true;

    var options = {
      send_page_view: false
    };
    if (true) {
      options.anonymize_ip = true;
    }

    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    window.gtag = gtag;
    gtag('js', new Date());
    gtag('config', 'G-WSM9M8LZ1S', options);
  </script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/python-series/garbage-collection/";/*]]>*/</script><!-- slice-start id="_gatsby-scripts-1" -->
          <script
            id="gatsby-chunk-mapping"
          >
            window.___chunkMapping="{\"app\":[\"/app-4586517e37959ccd4141.js\"],\"component---src-pages-404-tsx\":[\"/component---src-pages-404-tsx-ff8046675966000b0fba.js\"],\"component---src-pages-index-tsx\":[\"/component---src-pages-index-tsx-59b4a3146865b61e2864.js\"],\"component---src-pages-info-tsx\":[\"/component---src-pages-info-tsx-ad651534cff1184f2fc9.js\"],\"component---src-templates-post-template-tsx\":[\"/component---src-templates-post-template-tsx-1aeade1682b03e1af82c.js\"]}";
          </script>
        <script>window.___webpackCompilationHash="b04bba32066db0e1547f";</script><script src="/webpack-runtime-a23b6948257d1f63d941.js" async></script><script src="/framework-db988868b0935e917b4a.js" async></script><script src="/app-4586517e37959ccd4141.js" async></script><!-- slice-end id="_gatsby-scripts-1" --></body></html>